#cloud-config
# Cloud-init configuration for NVIDIA Air BCM deployment
# NOTE: Simplified to avoid WAF blocks on air.nvidia.com
# SSH_PUBLIC_KEY from .env replaces YOUR_SSH_PUBLIC_KEY_HERE
# {PASSWORD} is replaced at runtime by the deploy script

# Enable root account (cloud-init native)
disable_root: false

chpasswd:
  users:
    - name: root
      password: "{PASSWORD}"
      type: text
    - name: ubuntu
      password: "{PASSWORD}"
      type: text
  expire: false

ssh_pwauth: true

# SSH keys for all users (cloud-init handles key distribution)
ssh_authorized_keys:
  - YOUR_SSH_PUBLIC_KEY_HERE

# Bring up network interfaces
runcmd:
  - ip link set eth0 up
  - ip link set eth1 up
  - ip link set eth2 up
  - ip link set eth4 up
  - sleep 2
